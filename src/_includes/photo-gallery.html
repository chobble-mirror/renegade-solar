{% comment %}
  Photo Gallery Partial
  Usage: {% include "photo-gallery.html" tag: "solar-panels" %}
  Or:    {% include "photo-gallery.html" %} (shows all photos)
{% endcomment %}

{% assign sorted_gallery = gallery | sort: 'order' %}

<div class="photo-gallery">
  {% for item in sorted_gallery %}
    {% if include.tag %}
      {% if item.tags contains include.tag %}
        <a href="/assets/photos/{{ item.filename }}" class="gallery-item" data-tags="{{ item.tags | join: ',' }}" target="_blank">
          <img src="/assets/photos/{{ item.filename }}" alt="{{ item.alt }}" loading="lazy" decoding="async">
        </a>
      {% endif %}
    {% else %}
      <a href="/assets/photos/{{ item.filename }}" class="gallery-item" data-tags="{{ item.tags | join: ',' }}" target="_blank">
        <img src="/assets/photos/{{ item.filename }}" alt="{{ item.alt }}" loading="lazy" decoding="async">
      </a>
    {% endif %}
  {% endfor %}
</div>